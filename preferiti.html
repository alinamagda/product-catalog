<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>I miei preferiti - HappyHomeShop</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Header -->
    <header>
      <a href="index.html" id="logo">
        <img src="assets/logo.webp" alt="Logo HappyHomeShop" />
      </a>
      <h1>I miei preferiti</h1>
      <nav>
        <a href="account.html" aria-label="Il mio account" role="button" tabindex="0">
          üë§ Il mio account
        </a>
        |
        <a href="index.html">Home</a>
        |
        <a href="checkout.html" class="cart-summary" aria-label="Carrello" role="button" tabindex="0">
          üõí <span class="cart-count">0</span> articoli - Totale:
          ‚Ç¨<span class="cart-total">0.00</span>
        </a>
      </nav>
    </header>

    <!-- Main -->
    <main style="padding: 20px">
      <h2>Prodotti preferiti</h2>
      <section id="favorites-grid"></section>
    </main>

    <!-- Footer -->
    <footer>
      <p>¬© 2025 HappyHomeShop S.R.L. - P.IVA 01234567890</p>
    </footer>

    <!-- Script -->
    <script src="script.js"></script>
    <script>
      const favoritesGrid = document.getElementById("favorites-grid");

      function renderFavorites() {
        const savedFavorites = JSON.parse(localStorage.getItem("favorites")) || [];
        favoritesGrid.innerHTML = "";

        if (savedFavorites.length === 0) {
          favoritesGrid.innerHTML = "<p>Non hai ancora aggiunto preferiti.</p>";
          return;
        }

        const favoriteProducts = products.filter(p => savedFavorites.includes(p.id));

        const grid = document.createElement("div");
        grid.className = "product-category-grid";

        favoriteProducts.forEach(product => {
          const div = document.createElement("div");
          div.className = "product";
          const isFav = favorites.has(product.id);
          div.innerHTML = `
            <img src="${product.image}" alt="${product.name}" loading="lazy">
            <h3>${product.name}</h3>
            <p>‚Ç¨${product.price.toFixed(2)}</p>
            <div class="product-buttons">
              <button onclick="addToCart(${product.id})">Aggiungi al carrello</button>
              <button class="favorite-btn" onclick="toggleFavorite(${product.id}, this)">
                ${isFav ? "‚ù§" : "‚ô°"}
              </button>
            </div>
          `;
          grid.appendChild(div);
        });

        favoritesGrid.appendChild(grid);
      }

      renderFavorites();
    </script>
  </body>
</html>
